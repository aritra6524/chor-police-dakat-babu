<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chor Police Dakat Babu</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="setup-container" class="setup-container">
        <h1>The Royal Court</h1>
        <p class="subtitle">Enter the names of the four players who will vie for points and prestige.</p>
        <div id="player-inputs">
            <input type="text" id="p1-name" placeholder="Player 1 Name" value="Player 1">
            <input type="text" id="p2-name" placeholder="Player 2 Name" value="Player 2">
            <input type="text" id="p3-name" placeholder="Player 3 Name" value="Player 3">
            <input type="text" id="p4-name" placeholder="Player 4 Name" value="Player 4">
        </div>
        <div class="setup-actions">
            <button id="how-to-play-button" class="secondary-button">How to Play</button>
            <button id="start-game-button">Start Game</button>
        </div>
    </div>
    <div class="game-container hidden">
        <h1>Chor Police Dakat Babu</h1>
        <div id="status-panel" class="status-panel">
            <p id="status-message">Click "Start Round" to begin!</p>
            <div id="babu-instruction-panel" class="hidden">
                <button id="instruct-chor-button" class="instruction-button">Find the Chor</button>
                <button id="instruct-dakat-button" class="instruction-button">Find the Dakat</button>
            </div>
        </div>
        <div id="game-board" class="game-board">
            <div class="player-area">
                <h3 class="player-name"></h3>
                <div class="player-card" id="player1">
                    <div class="card-inner"><div class="card-front"></div><div class="card-back"><span class="icon"></span><span class="role"></span><span class="points"></span></div></div>
                </div>
            </div>
            <div class="player-area">
                <h3 class="player-name"></h3>
                <div class="player-card" id="player2">
                    <div class="card-inner"><div class="card-front"></div><div class="card-back"><span class="icon"></span><span class="role"></span><span class="points"></span></div></div>
                </div>
            </div>
            <div class="player-area">
                <h3 class="player-name"></h3>
                <div class="player-card" id="player3">
                    <div class="card-inner"><div class="card-front"></div><div class="card-back"><span class="icon"></span><span class="role"></span><span class="points"></span></div></div>
                </div>
            </div>
            <div class="player-area">
                <h3 class="player-name"></h3>
                <div class="player-card" id="player4">
                    <div class="card-inner"><div class="card-front"></div><div class="card-back"><span class="icon"></span><span class="role"></span><span class="points"></span></div></div>
                </div>
            </div>
        </div>
        <button id="action-button">Start Round</button>
        <div id="persistent-scoreboard" class="persistent-scoreboard">
            <!-- Player scores will be generated by JS -->
        </div>
    </div>

    <!-- Detailed Scoreboard Modal -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <div id="modal-content" class="modal-content">
            <div id="winner-banner" class="winner-banner hidden"></div>
            <h2 id="modal-title">Round Results</h2>
            <div id="modal-scoreboard-grid" class="modal-scoreboard-grid">
                <!-- Content will be generated by JS -->
            </div>
            <button id="next-round-button">Play Next Round</button>
        </div>
    </div>

    <!-- Rules Modal -->
    <div id="rules-modal-overlay" class="modal-overlay hidden">
        <div id="rules-modal-content" class="modal-content">
            <h2>How to Play: The Royal Court</h2>
            <p class="rules-intro">A game of deduction and deception for four players.</p>
            
            <h3>The Roles & Points</h3>
            <div class="rules-grid">
                <div class="role-card babu">
                    <span class="icon">üëë</span>
                    <div class="role-info">
                        <strong>Babu (King)</strong>
                        <span>1000 Points</span>
                        <p>Your card is revealed first. You must secretly instruct the Police to find either the Chor or the Dakat.</p>
                    </div>
                </div>
                <div class="role-card police">
                    <span class="icon">üõ°Ô∏è</span>
                    <div class="role-info">
                        <strong>Police (Guard)</strong>
                        <span>500 Points</span>
                        <p>Your card is revealed after the Babu's command. You must follow the order and correctly identify the target.</p>
                    </div>
                </div>
                <div class="role-card dakat">
                    <span class="icon">üî•</span>
                    <div class="role-info">
                        <strong>Dakat (Bandit)</strong>
                        <span>800 Points</span>
                        <p>You are a high-value target. Your goal is to remain hidden. If the Police guess incorrectly, you get their points!</p>
                    </div>
                </div>
                <div class="role-card chor">
                    <span class="icon">üé≠</span>
                    <div class="role-info">
                        <strong>Chor (Thief)</strong>
                        <span>0 Points</span>
                        <p>You have no points, but if the Babu orders the Police to find the Dakat and they succeed, you get the Police's points!</p>
                    </div>
                </div>
            </div>
            <button id="close-rules-button" class="secondary-button">Got It!</button>
        </div>
    </div>

    <!-- Sound Effects -->
    <div id="audio-container" style="display: none;">
        <audio id="sound-click" src="./sfx/single-mouse-click-sound-hd-379373.mp3" preload="auto"></audio>
        <audio id="sound-deal" src="./sfx/card-sounds-35956.mp3" preload="auto"></audio>
        <audio id="sound-flip" src="./sfx/flipcard-91468.mp3" preload="auto"></audio>
        <audio id="sound-correct" src="./sfx/correct-guess.mp3" preload="auto"></audio>
        <audio id="sound-wrong" src="./sfx/wrong-47985.mp3" preload="auto"></audio>
        <audio id="sound-win" src="./sfx/victory-chime-366449.mp3" preload="auto"></audio>
        <audio id="sound-ambient" src="./sfx/ambient-game-67014.mp3" preload="auto" loop></audio>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script src="script.js"></script>
</body>
</html>